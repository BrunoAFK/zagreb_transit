<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Zagreb Transit for Home Assistant - GTFS + realtime arrivals with dynamic watch sensors." />
  <meta name="theme-color" content="#0b1020" />
  <title>Zagreb Transit | Home Assistant Integration</title>

  <script>
    (function () {
      const saved = localStorage.getItem("zt_theme");
      const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
      const dark = saved ? saved === "dark" : prefersDark;
      document.documentElement.classList.toggle("dark", dark);
    })();
  </script>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          fontFamily: {
            sans: ["Space Grotesk", "ui-sans-serif", "system-ui", "sans-serif"],
          },
          colors: {
            ink: {
              50: "#f6f7fb",
              100: "#e8ecf6",
              900: "#0b1020",
            },
            accent: {
              500: "#17b26a",
              600: "#12945a",
            },
          },
          keyframes: {
            floaty: {
              "0%, 100%": { transform: "translateY(0px)" },
              "50%": { transform: "translateY(-8px)" },
            },
            pulseGlow: {
              "0%, 100%": { opacity: "0.25" },
              "50%": { opacity: "0.55" },
            },
          },
          animation: {
            floaty: "floaty 6s ease-in-out infinite",
            pulseGlow: "pulseGlow 4s ease-in-out infinite",
          },
        },
      },
    };
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    .reveal {
      opacity: 0;
      transform: translateY(18px);
      transition: opacity 0.7s ease, transform 0.7s ease;
    }

    .reveal.in {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>
<body class="h-full bg-ink-50 text-slate-800 antialiased transition-colors duration-300 dark:bg-ink-900 dark:text-slate-100">
  <div class="relative min-h-full overflow-hidden">
    <div class="pointer-events-none absolute inset-0 -z-10">
      <div class="absolute -left-20 top-16 h-64 w-64 rounded-full bg-emerald-400/30 blur-3xl dark:bg-emerald-500/20 animate-pulseGlow"></div>
      <div class="absolute right-0 top-44 h-72 w-72 rounded-full bg-cyan-300/30 blur-3xl dark:bg-cyan-500/20 animate-pulseGlow"></div>
      <div class="absolute bottom-0 left-1/3 h-56 w-56 rounded-full bg-lime-300/20 blur-3xl dark:bg-lime-500/15 animate-pulseGlow"></div>
    </div>

    <header class="mx-auto flex w-full max-w-6xl items-center justify-between px-5 py-6 sm:px-8">
      <div class="flex items-center gap-3">
        <div class="grid h-10 w-10 place-items-center rounded-2xl border border-emerald-500/30 bg-white/80 text-emerald-600 shadow-sm dark:bg-slate-800/80 dark:text-emerald-300">
          <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 12h6l2-4 3 8 2-4h5" />
          </svg>
        </div>
        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 dark:text-slate-400">Home Assistant</p>
          <h1 class="text-lg font-semibold">Zagreb Transit</h1>
        </div>
      </div>

      <div class="flex items-center gap-2 sm:gap-3">
        <a id="repoLink" href="https://github.com/BrunoAFK/ZagrebTransport" target="_blank" rel="noopener noreferrer"
          class="inline-flex items-center gap-2 rounded-full border border-slate-300/80 bg-white/80 px-4 py-2 text-sm font-medium text-slate-700 backdrop-blur transition hover:-translate-y-0.5 hover:border-slate-400 hover:shadow dark:border-slate-700 dark:bg-slate-800/70 dark:text-slate-200 dark:hover:border-slate-500">
          <svg viewBox="0 0 24 24" class="h-4 w-4" fill="currentColor" aria-hidden="true"><path d="M12 .5a12 12 0 0 0-3.79 23.39c.6.12.82-.26.82-.58v-2.2c-3.34.73-4.04-1.42-4.04-1.42-.54-1.38-1.34-1.74-1.34-1.74-1.1-.75.08-.73.08-.73 1.21.08 1.85 1.25 1.85 1.25 1.08 1.85 2.84 1.31 3.53 1 .11-.79.42-1.31.76-1.61-2.67-.3-5.48-1.34-5.48-5.95 0-1.31.47-2.37 1.24-3.2-.12-.3-.54-1.52.12-3.16 0 0 1.01-.32 3.31 1.22a11.6 11.6 0 0 1 6.02 0c2.3-1.54 3.31-1.22 3.31-1.22.66 1.64.24 2.86.12 3.16.77.83 1.24 1.89 1.24 3.2 0 4.63-2.82 5.65-5.5 5.95.43.37.82 1.1.82 2.23v3.3c0 .32.22.71.83.58A12 12 0 0 0 12 .5Z"/></svg>
          <span>GitHub</span>
          <span class="text-slate-400">•</span>
          <span class="inline-flex items-center gap-1 font-semibold text-emerald-600 dark:text-emerald-300">
            <svg viewBox="0 0 24 24" class="h-4 w-4" fill="currentColor" aria-hidden="true"><path d="m12 17.3-6.2 3.7 1.7-7.1L2 9.3l7.2-.6L12 2l2.8 6.7 7.2.6-5.5 4.6 1.7 7.1z"/></svg>
            <span id="starsCount">—</span>
          </span>
        </a>

        <button id="themeToggle" type="button" aria-label="Toggle theme"
          class="grid h-10 w-10 place-items-center rounded-full border border-slate-300/80 bg-white/80 text-slate-700 transition hover:-translate-y-0.5 hover:border-slate-400 hover:shadow dark:border-slate-700 dark:bg-slate-800/70 dark:text-slate-200 dark:hover:border-slate-500">
          <svg id="sunIcon" viewBox="0 0 24 24" class="h-5 w-5 dark:hidden" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"/></svg>
          <svg id="moonIcon" viewBox="0 0 24 24" class="hidden h-5 w-5 dark:block" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.8A9 9 0 1 1 11.2 3a7 7 0 0 0 9.8 9.8Z"/></svg>
        </button>
      </div>
    </header>

    <main class="mx-auto max-w-6xl px-5 pb-16 sm:px-8">
      <section class="reveal grid gap-10 rounded-3xl border border-white/70 bg-white/70 p-8 shadow-xl backdrop-blur-xl dark:border-slate-700/60 dark:bg-slate-900/60 lg:grid-cols-[1.2fr_0.8fr] lg:p-12">
        <div>
          <p class="mb-3 inline-flex items-center rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold uppercase tracking-[0.18em] text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-300">Realtime GTFS + Watches</p>
          <h2 class="text-4xl font-bold leading-tight sm:text-5xl">Transit info for Zagreb, built for Home Assistant.</h2>
          <p class="mt-5 max-w-2xl text-lg text-slate-600 dark:text-slate-300">
            Combines static GTFS and realtime feed data to provide nearby departures, route boards,
            and dynamic watch sensors you can wire into dashboards and automations.
          </p>

          <div class="mt-8 flex flex-wrap gap-3">
            <a href="https://github.com/BrunoAFK/ZagrebTransport" target="_blank" rel="noopener"
              class="rounded-xl bg-emerald-500 px-5 py-3 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-emerald-600">
              Open Repository
            </a>
            <a href="https://github.com/BrunoAFK/ZagrebTransport/issues" target="_blank" rel="noopener"
              class="rounded-xl border border-slate-300 bg-white/80 px-5 py-3 text-sm font-semibold text-slate-700 transition hover:-translate-y-0.5 hover:border-slate-400 dark:border-slate-700 dark:bg-slate-800/70 dark:text-slate-200 dark:hover:border-slate-500">
              Report Issue
            </a>
          </div>
        </div>

        <div class="animate-floaty rounded-2xl border border-emerald-300/40 bg-gradient-to-br from-emerald-400/10 via-cyan-300/10 to-lime-300/10 p-6 dark:border-emerald-500/20">
          <p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-500 dark:text-slate-400">Core Entities</p>
          <ul class="mt-4 space-y-3 text-sm text-slate-700 dark:text-slate-200">
            <li class="rounded-lg border border-white/70 bg-white/80 px-3 py-2 dark:border-slate-700 dark:bg-slate-800/80">sensor.zagreb_transport_feed_source</li>
            <li class="rounded-lg border border-white/70 bg-white/80 px-3 py-2 dark:border-slate-700 dark:bg-slate-800/80">sensor.zagreb_transport_realtime_status</li>
            <li class="rounded-lg border border-white/70 bg-white/80 px-3 py-2 dark:border-slate-700 dark:bg-slate-800/80">sensor.zagreb_transport_nearby_board</li>
            <li class="rounded-lg border border-white/70 bg-white/80 px-3 py-2 dark:border-slate-700 dark:bg-slate-800/80">sensor.zagreb_transport_watch_registry</li>
          </ul>
        </div>
      </section>

      <section class="mt-10 grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        <article class="reveal rounded-2xl border border-slate-200/80 bg-white/75 p-6 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60">
          <h3 class="text-lg font-semibold">Watch Sensors</h3>
          <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Create and manage dynamic watches by stop, line, direction, or nearby context.</p>
        </article>
        <article class="reveal rounded-2xl border border-slate-200/80 bg-white/75 p-6 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60">
          <h3 class="text-lg font-semibold">Realtime Fallbacks</h3>
          <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Stale feed protection and resilient cache logic keep dashboards usable during outages.</p>
        </article>
        <article class="reveal rounded-2xl border border-slate-200/80 bg-white/75 p-6 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60">
          <h3 class="text-lg font-semibold">Dashboard Ready</h3>
          <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Includes sample dashboards and docs for quick setup in both Croatian and English.</p>
        </article>
      </section>

      <section class="reveal mt-10 rounded-3xl border border-slate-200/80 bg-white/75 p-8 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60">
        <h3 class="text-2xl font-bold">Quick Start</h3>
        <ol class="mt-5 grid gap-3 text-sm text-slate-700 dark:text-slate-300 sm:grid-cols-2">
          <li class="rounded-xl border border-slate-200 bg-white/80 px-4 py-3 dark:border-slate-700 dark:bg-slate-800/70">1. Install via HACS custom repository.</li>
          <li class="rounded-xl border border-slate-200 bg-white/80 px-4 py-3 dark:border-slate-700 dark:bg-slate-800/70">2. Restart Home Assistant.</li>
          <li class="rounded-xl border border-slate-200 bg-white/80 px-4 py-3 dark:border-slate-700 dark:bg-slate-800/70">3. Add integration: <code class="font-semibold">Zagreb Transit</code>.</li>
          <li class="rounded-xl border border-slate-200 bg-white/80 px-4 py-3 dark:border-slate-700 dark:bg-slate-800/70">4. Create your first watch sensor in integration options.</li>
        </ol>
      </section>
    </main>
  </div>

  <script>
    const themeToggle = document.getElementById("themeToggle");
    themeToggle.addEventListener("click", () => {
      const html = document.documentElement;
      const nextDark = !html.classList.contains("dark");
      html.classList.toggle("dark", nextDark);
      localStorage.setItem("zt_theme", nextDark ? "dark" : "light");
    });

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) entry.target.classList.add("in");
        });
      },
      { threshold: 0.12 }
    );
    document.querySelectorAll(".reveal").forEach((el) => observer.observe(el));

    async function loadStars() {
      const starsEl = document.getElementById("starsCount");
      try {
        const response = await fetch("https://api.github.com/repos/BrunoAFK/ZagrebTransport");
        if (!response.ok) throw new Error("GitHub API error");
        const data = await response.json();
        const stars = data.stargazers_count;
        starsEl.textContent = typeof stars === "number" ? stars.toLocaleString("en-US") : "—";
      } catch (_err) {
        starsEl.textContent = "—";
      }
    }
    loadStars();
  </script>
</body>
</html>
